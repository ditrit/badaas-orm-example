# Example of badaas-orm

This is a example of how to use badaas-orm in two variations: standalone and with uber fx, each one of them in its corresponding folder. If you are interested in using badaas-orm in a BaDaaS application please check the [BaDaaS example](https://github.com/ditrit/badaas-example).

## Generate conditions

After choosing the example you want to run (`cd standalone` or `cd fx`) you will need to generate the conditions for the models using `badaas-cli`.

Install `badaas-cli`:

```bash
go install github.com/ditrit/badaas-cli
```

Generate conditions:

```bash
go generate ./...
```

For details visit [badaas-cli docs](github.com/ditrit/badaas-cli/README.md).

## Run it

First, we need a database to store the data, in this case we will use CockroachDB:

```bash
docker compose up -d
```

After that, we can run the application:

```bash
go run .
```

And you should see something like:

```bash
standalone/example.go:110
[1.733ms] [rows:1] SELECT products.* FROM "products" WHERE products.int = 1 AND "products"."deleted_at" IS NULL

standalone/example.go:110
[info] transaction_exec [3.045ms]
Products with int = 1 are:
&{UUIDModel:{ID:5d29456f-5edd-4312-9fdf-678c27f51f54 CreatedAt:2023-08-09 15:23:02.068809 +0200 CEST UpdatedAt:2023-08-09 15:23:02.068809 +0200 CEST DeletedAt:{Time:0001-01-01 00:00:00 +0000 UTC Valid:false}} String: Int:1 Float:0 Bool:false}
```

## Explore it

In [main.go](main.go) you will find the configuration required to use the badaas-orm: provide a GormDB connection, start the badaas-orm module and create the CRUD services.

In [example.go](example.go) you will find the actual example, where objects are created and then queried using badaas-orm.

In [models.go](models/models.go) you will find the models definition.

In [conditions](conditions/) you will find the conditions generated by badaas-cli that allow you query the models in `example.go`.

## Go deeper

For more details, visit [badaas-orm docs](https://github.com/ditrit/badaas/orm/README.md).
